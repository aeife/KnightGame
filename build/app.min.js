var app=angular.module("app",["knightGame","ngRoute"]);app.config(function(){}),app.controller("AppCtrl",function(a,b){a.msg="Hello, World!",a.knightGame=b,b.config({knightCount:10}),a.degs=[];for(var c=0;c<b.getConfig().knightCount;c++)a.degs.push(360/b.getConfig().knightCount*c+270);console.log(a.degs),b.start()}),angular.module("knightGame.knight",[]).factory("Knight",function(){function a(a,b){this.health=a,this.attackValue=b,this.armorValue=0,this.dead=!1}return a.prototype.getHealth=function(){return this.health},a.prototype.getAttackValue=function(){return this.attackValue},a.prototype.takeDamage=function(a){this.health-=a,this.health<0&&(this.health=0,this.dead=!0)},a.prototype.attack=function(a){a.takeDamage(this.attackValue)},a}).directive("knight",function(){return{templateUrl:"src/knightGame/knight.html",restrict:"E",scope:{obj:"=",status:"="},controller:function(a){a.getImgColor=function(){return a.status.current?"green":a.status.next?"red":"black"}}}}),angular.module("knightGame",["knightGame.strategy.linearStrategy"]).factory("knightGame",function(a,b,c){var d={knightCount:10,strategy:c};return{start:function(){var b=d.strategy;a.info("starting the simulation..."),b.init(d.knightCount),this.knights=b.knights},config:function(a){angular.extend(d,a)},getConfig:function(){return d},knights:[],makeTurn:function(){d.strategy.current.attack(d.strategy.next),d.strategy.turn()},getKnightStatus:function(a){return a===d.strategy.current?"current":void 0}}}),angular.module("knightGame.strategy.linearStrategy",["knightGame.knight"]).factory("linearStrategy",function(a){return{init:function(b){for(var c=0;b>c;c++)this.knights.push(new a(100,60));this.current=this.knights[0],this.next=this.knights[1]},knights:[],turn:function(){this.current=this.findNext(this.current),this.next=this.findNext(this.current),this.current===this.next&&(this.finished=!0)},findNext:function(a){do a=this.knights[(this.knights.indexOf(a)+1)%this.knights.length];while(a.dead);return a},current:null,next:null,finished:!1}});